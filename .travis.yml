language: go
go:
- 1.14.x
env:
  global:
  - GO111MODULE=on
  - secure: YyOgjBU78Q3ZxjCjkctlmmT+RQIsZhcRS0Jym9pTF7RZKC5ke0IcVoWLmLyHI4Tvu28zRvGZRqNTEswr9LZ01NG9sFAsDilnEkX02FMnC8ucrXNtVd7N9m3Rro0AHUROEkXy7Sw2NwZe4iUvPgAobIqEq5QtuUhy8nNLpc7X95qqaG8+ShoeAUOGrq+s1MvSlfMZvAXvMHmSBpnz6GuKpLVQbmPsC8TNAmZuTj9s0yQ31VmFgFesNA/r8ef/Npe7mTUT4nGpIlccELxo32BSad/g3IW1e45i+nQ56cP38FycaCr9oU/slmjz5v41g1STSX8o6EiKSZNJGsX4VVLX2AQdKNEepH5iUJihVzWGImAnNFNaIM+23CMhBcsLj/h42m/zX9FuOPF5dcjAzOmBTpk7ouw/QAogkRXV96PGkZMWfxmQmtjM48jEAE1pwyjskG4ITRhi/FCVvl2g3lE8drenLk78Iq6/OTfAMr4iJn4A3Qn+x+25d5njZBR8aAmLghLgpkYhIsCDgloxailr5tLe1UsNZxRJ2PNZRW/dd2zwT88H7FyoTShlxZOVuXuZ6OJFY75GMWb5FlZ8Kmc4daFUuutQVNnazHGfBRsb5xWKHyiA8Z8gbOBoxd1BJ2lUHICa21V2NYy9SlsyaU+a6WAuAoUmyta6t208OKnyJq0=
  - secure: ZqbaLdAcc6YHkEXoyHAlW6PQIAlxv1n3C0gK5TI8HPxo85LqGdcS/LertKdTrYlppaI+gmj1SH4vmqdvPhIxLZFY8ly19MTrt6LgtW1kLH6osYMJ6SU0EJu7EFj7H09FcSM2zGIrZB2BIcraKFbFzhmWumyWnQejioeNWVcULoeg9GrEC39HOSX8koeDNy6ng3WM74HUI9Y3awnVjr3g8EZWOIA7Io6uAemRVW5Zs4HFolxB11dyn+ivt5IaJRMkIVZKCu5ykA2kF/NbOIYX4nty/0lpVWNM/ISCUOyEy1Q/oAGNKDMUfBsx19bmD4N8MVRxFr01aX3fi7qV1majMUQWm4JKciyBik5IdpYQj2ehgucye8miCXc5DyIQDzINdRkOmTR1vpoCDd3zPrriMtKJzzXnrdPfDtqqEKXEDAqGT4yz2mpvScHZzJg8W/6ADC8CDQ9mVQHPxRTA8zqAN2OBclhzGEFRcG0Fq4YKOAtbhxM8lzBPMR1pbtqbO+GOT8nD3bpD/0YwAVY8poY34PGQ/WAEZChF0XQi83NmqpLUMRZHKVfzcV42jit5fqqiiGCyQZFLJ8Y2CR3tiobqiaD4s1I6bw6f0UsY16GFTqb3GeyEMsaqI1Pcu4EnsmNnqUyoOdwXefcHa/z36ins4X5PtLl6aAMgTiz6wlxFvLI=
  - secure: P5Z9AteX+QPxirj4XGbTt9zOgENevx6s+aDKcCpQDQm7qx28tnp4YTlbeLCSupwxpwg/IcaUk9mz2MWbquMnt8IQM1KlDN7YZsTfkIG553puDBsW3lMLx85whTliihbdRSklj9tRIoLgthQrtcc+9hv48oCbDVYNU3hiN4bMFa+RthYON9UDnSYMNN9U4fm/XUNQHYctwLCVRChDd33r6q8MN9Kt9TkjHagqWqmx7DaqMJn6aWUqD5OT08AV/ZuigA/A5IK94ho8jaHOAHnPKO2Y/vTU4KLI1pJdpmNtgt4b0VNlRFoQ+c36Eo1crQqu998N/fnbfFzXHPR8M0lNpuhoiwmjwNEvKHZSwQjxpyu8Z0mviMmmYzlGOXc5Q1a+jjoOHvNBY3vRnb8mB8r9NPKQgbG30nVKbXBAHRJn/VShjibRBFIK8c08g/U7sNHggkPW4/esMcPL+gAB1JqzsPKs+U2b1UAuqiIRtw+vWTBjcbR5HbmNdz+hlM6wfyLmirzaVshIU/vHOSbp+YpaIQpoIDZqM+6bm63FMXz7nnLxQtf0WLpBZlN2m/JZ5jqxCxuBMt7EqxyeCmxovrnWpYOua5sKnkDjI/YLa4Kb76k6An28dWH12HNh2URnpPxSYyTWzYr/IAIu4QL63R+EChAMmocg7AyKxnbObAcC2S0=
jobs:
  include:
  - stage: build
    install: []
    script:
    - set -e
    - scripts/ci scripts/build
    - scripts/ci scripts/test
    before_deploy: scripts/ci scripts/dist-all
    deploy:
      on:
        tags: true
      skip_cleanup: true
      file_glob: true
      provider: releases
      api_key:
        secure: tlsvJH7wQjaA+TOaR18uFU64+ZD0TCE7y5fz3hjgLgGzNoiofyEowZH7kSNGpBzbEUsbajTvyCg3CHMc5E/N/bj/atblZAn8PZUY6qX4i7frbW/a4X5fQJnmf2tlnalTkkihMg6nATKKV8ketN1YRvfJm1WmGT3veDHwr+fKz0bcFIQCsPTkmGgraKPT3zwqYiw+d5N9+KRaPEV3G2GcP7waeF2hpQGz7w6X1QVn+ppljqpRoxZmXTNaJJNqlqgrZsW46TWSjIskyQY23SfuAiZvfNol7/Ders9JbWfIDAm6+YpExPXLUdVGd8qTsSjm6BkQ7cl1B9J8fLIbcu120sRQb00U6QE+8HFEyN3UlCLqVh3T+O39emXTGyweH52ffAPdInp+jOuYrK0m4fOeToaZ4+KofmPel4Kl9hmo9n3F+x+pMasAUA8GnzDc1WDJfJJYD0uoZtZmEHqH6am1yaRq1OJFTLWLABy2tlYRWOp09NLnx/I/d+JbxA8gNX4vqI77JryKZw7wfKS6PsEDgIQ2LyR9wVerp/fXSo4SqBJdVC/Rttp3s/P9f1zcLVI2++GFqHasuQlADbMsLaQM4HO3MOlFot2mJFok05N75Zbwv7qYmVBdkqOqvu7Y7IIf4H4ZUkxf/7ewEF6Vp8rhIlkwGGGs4XOu2hzmh75RHgo=
      file: bin/*
    after_deploy: scripts/ci scripts/run-workflow
notifications:
  email: false
  slack:
    on_success: change
    on_failure: change
    template:
    - "<%{compare_url}|%{commit_subject}> | %{author}"
    - "%{repository_slug} %{branch} | <%{build_url}|#%{build_number}> %{result} in
      %{elapsed_time}"
    rooms:
    - secure: zu/MZURvDivl7qapoRAcOtF6yH9zUwr1YqpDObAlF9mAO0z5VllKVVdDZJZ6QwGNzfl5m4MBXLh7PzXex3VXwbXlGYvUbsvUj9cLo2cLqJqtgBQ4DuVVCJXF4Rj/8sNRx4JfquKGE/Yae07MUXdcIJ1FuOoVHpUTNW1eA0SE5LIWRB8WJiBC53jl5itkUOUqh5l43W+8djpDbcds+vyjE9omwuHW2Zxh7TGqXBSCf2LPmjAzL4eZD2yTE8VUNNbKwx6dBGqpS0Y3Ke4R4bvj9PAZUAqG3dxMKUKU0OyJHg/Jkg5ZqVEoghCSZNGpD2aEfB7C5+hWF1A6Ftvs09qd3cGyioSD88Hj7F7hCzgz2Z+rBMmhvXb9cEeX3iDBDMQ+xd7bDL8bmYMSTVFnnqqz+4SewRCo3efbEF9xaBkUfIpal1Ax0XL9PnBHCniKqVkL99v9ERE5maUoD8W/7JwamqG+ija7P2kblNNLB6G+mh75KHmKU5GNB2+QcLtk3WUtxKLP9KqCUc7CZ9pk02nQlkXClG2nbAWo0QyYq1opbjDMmCpLK1FZiPJpL82QleXfw2JuKIVuUfq9bihOwc1AJvJhJDtNTDQMp+j+2kHBwQOy/EXd1HkK4JTt84+JXzurK3UhcH39g03TCvTpDq/dHy69a706OK4CW2kxIyIfO08=
